
number_procs 1

type loc = L1 | L2 | L3 | End

(* Program counters *)
array PC[proc] : loc

(* Global variables *)
weak var Turn : int

init (p) { PC[p] = L1 && Turn = 0 }

unsafe (p) { PC[p] = End }


(* Thread 1 *)

transition t1_L1_L2_R_Turn_p1 ()
requires { PC[#1] = L1 && read(#1, Turn) = 1 }
{ PC[#1] := L2 }

transition t1_L2_L2_R_Turn_not_p1 ()
requires { PC[#1] = L2 && read(#1, Turn) <> 1 }
{ PC[#1] := L2 }

transition t1_L2_L3_R_Turn_p1 ()
requires { PC[#1] = L2 && read(#1, Turn) = 1 }
{ PC[#1] := L3 }

transition t1_CS_End ()
requires { PC[#1] = L3 }
{ PC[#1] := End; }
