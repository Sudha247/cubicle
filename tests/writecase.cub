
(* BUG : Cubicle tries with 3 procs... *)

number_procs 2

weak array F[proc] : int

init (i) { F[i] = 0 }

unsafe (i j) { read(i, F[i]) = 1 && read(i, F[j]) = 1 }

transition t1 (i j)
{ write(i, F[p], case
       	   | p = i : 1
       	   | p = j : 2) }
