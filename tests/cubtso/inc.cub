
number_procs 2

type loc = L1 | L2

array PC[proc] : loc

weak var X : int

init (p) { PC[p] = L1 && X = 0 }

unsafe (p1 p2) { PC[p1] = L2 && PC[p2] = L2 &&
                 read(p1, X) <> 2 }

transition t (p)
requires { PC[p] = L1 }
{ PC[p] := L2; write(p, X, read(p, X) + 1) }
