
number_procs 1

type loc = L1 | L2 | L3 | End

array PC[proc] : loc
array T[proc] : int
weak var X : int

init (p) { PC[p] = L1 && X = 0 }

(* ALLOWED Final State *)
unsafe (p) { PC[p] = End }

transition t1 ([p])
requires { PC[p] = L1 }
{ PC[p] := L2; T[p] := X }

transition t2a ([p])
requires { PC[p] = L2 && T[p] < 2 }
{ PC[p] := L3 }

transition t2b ([p])
requires { PC[p] = L2 && T[p] = 2 }
{ PC[p] := End }

transition t3 ([p])
requires { PC[p] = L3 }
{ PC[p] := L1; X := T[p] + 1 }
