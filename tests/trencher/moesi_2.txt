
# Memory layout:
# 0 — C1
# 1 — C2
# 0 = I, 1 = S, 2 = E, 3 = O, 4 = M

thread t0
initial bad0
final bad
transition	bad0	bad1	lock
transition	bad1	bad2	read	C1	0
transition	bad2	badul	read	C2	1
transition	badul	badchk	unlock
transition 	badchk	bad	check	&& == C1 4 == C2 4
end

thread t1
initial init
final init
transition	init	l1	lock
transition	l1	l2	read	C	0
transition	l2	sh	check	== C    0
transition	l2	md	check	== C    2
transition	l2	ex	check	|| || == C 0 == C 1 == C 3

transition	sh	sh21	write	1	0
transition	sh21	sh22	read	C	1
transition	sh22	sh23	check	== C    2
transition	sh22	sh24	check	== C    4
transition	sh22	shul	check	&& != C 2 != C 4
transition	sh23	shul	write	1     	1
transition	sh24	shul	write	3     	1
transition	shul	init	unlock

transition	md	mdul	write	4	0
transition	mdul	init	unlock

transition	ex	ex2	write	2	0
transition	ex2	exul	write   0	1
transition	exul	init	unlock
end

thread t2
initial init
final init
transition	init	l1	lock
transition	l1	l2	read	C	1
transition	l2	sh	check	== C    0
transition	l2	md	check	== C    2
transition	l2	ex	check	|| || == C 0 == C 1 == C 3

transition	sh	sh21	write	1	1
transition	sh21	sh22	read	C	0
transition	sh22	sh23	check	== C    2
transition	sh22	sh24	check	== C    4
transition	sh22	shul	check	&& != C 2 != C 4
transition	sh23	shul	write	1     	0
transition	sh24	shul	write	3     	0
transition	shul	init	unlock

transition	md	mdul	write	4	1
transition	mdul	init	unlock

transition	ex	ex1	write	2	1
transition	ex1	exul	write   0	0
transition	exul	init	unlock
end
