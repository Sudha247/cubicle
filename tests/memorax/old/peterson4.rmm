forbidden
CS CS CS CS

data
  flag0 = * : [0:1]
  flag1 = * : [0:1]
  flag2 = * : [0:1]
  flag3 = * : [0:1]
  turn  = * : [0:3]

process
registers
  $flag1 = * : [0:1]
  $flag2 = * : [0:1]
  $flag3 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag0 := 1;
      either { locked write: turn := 1 or
               locked write: turn := 2 or
	       locked write: turn := 3 }; 
  L1: read: $flag1 := flag1;
      read: $flag2 := flag2;
      read: $flag3 := flag3;
      read: $turn := turn; 
      if [$flag1 = 1 || $flag2 = 1 || $flag3 = 1] && $turn != 0
        then goto L1;
  CS: 
      write: flag0 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $flag2 = * : [0:1]
  $flag3 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag1 := 1;
      either { locked write: turn := 0 or
               locked write: turn := 2 or
	       locked write: turn := 3 }; 
  L1: read: $flag0 := flag0;
      read: $flag2 := flag2;
      read: $flag3 := flag3;
      read: $turn := turn;
      if [$flag0 = 1 || $flag2 = 1 || $flag3 = 1] && $turn != 1
        then goto L1;
  CS:
      write: flag1 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $flag1 = * : [0:1]
  $flag3 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag2 := 1;
      either { locked write: turn := 0 or
               locked write: turn := 1 or
	       locked write: turn := 3 }; 
  L1: read: $flag0 := flag0;
      read: $flag1 := flag1;
      read: $flag3 := flag3;
      read: $turn := turn;
      if [$flag0 = 1 || $flag1 = 1 || $flag3 = 1] && $turn != 2
        then goto L1;
  CS:
      write: flag2 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $flag1 = * : [0:1]
  $flag2 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag3 := 1;
      either { locked write: turn := 0 or
               locked write: turn := 1 or
	       locked write: turn := 2 }; 
  L1: read: $flag0 := flag0;
      read: $flag1 := flag1;
      read: $flag2 := flag2;
      read: $turn := turn;
      if [$flag0 = 1 || $flag1 = 1 || $flag2 = 1] && $turn != 3
        then goto L1;
  CS:
      write: flag3 := 0;
      goto L0
