forbidden
CS CS CS CS

data
  flag0 = * : [0:1]
  flag1 = * : [0:1]
  flag2 = * : [0:1]
  flag3 = * : [0:1]
  turn  = * : [0:3]

process
registers
  $flag1 = * : [0:1]
  $flag2 = * : [0:1]
  $flag3 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag0 := 1;
      locked write: turn := 1;
      read: $flag1 := flag1;
      read: $flag2 := flag2;
      read: $flag3 := flag3;
      read: $turn := turn; 
      while [$flag1 = 1 || $flag2 = 1 || $flag3 = 1] && $turn != 0 do {
        read: $flag1 := flag1;
        read: $flag2 := flag2;
        read: $flag3 := flag3;
        read: $turn := turn
      };
      goto CS;
  CS: 
      write: flag0 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $flag2 = * : [0:1]
  $flag3 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag1 := 1;
      locked write: turn := 2;
      read: $flag0 := flag0;
      read: $flag2 := flag2;
      read: $flag3 := flag3;
      read: $turn := turn;
      while [$flag0 = 1 || $flag2 = 1 || $flag3 = 1] && $turn != 1 do {
        read: $flag0 := flag0;
        read: $flag2 := flag2;
        read: $flag3 := flag3;
        read: $turn := turn
      };
      goto CS;
  CS:
      write: flag1 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $flag1 = * : [0:1]
  $flag3 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag2 := 1;
      locked write: turn := 3;
      read: $flag0 := flag0;
      read: $flag1 := flag1;
      read: $flag3 := flag3;
      read: $turn := turn;
      while [$flag0 = 1 || $flag1 = 1 || $flag3 = 1] && $turn != 2 do {
        read: $flag0 := flag0;
        read: $flag1 := flag1;
        read: $flag3 := flag3;
        read: $turn := turn
      };
      goto CS;
  CS:
      write: flag2 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $flag1 = * : [0:1]
  $flag2 = * : [0:1]
  $turn = * : [0:3]
text
  L0: write: flag3 := 1;
      locked write: turn := 0;
      read: $flag0 := flag0;
      read: $flag1 := flag1;
      read: $flag2 := flag2;
      read: $turn := turn;
      while [$flag0 = 1 || $flag1 = 1 || $flag2 = 1] && $turn != 3 do {
        read: $flag0 := flag0;
        read: $flag1 := flag1;
        read: $flag2 := flag2;
        read: $turn := turn
      };
      goto CS;
  CS:
      write: flag3 := 0;
      goto L0
