forbidden
CS CS

data
  lock = 0 : [0:1]

process (2)
registers
  $r = * : [0:1]
text
  ENT: locked { read: $r := lock; write: lock := 1 };
       if $r = 1 then goto ENT;
  CS:  nop;
  REL: write: lock := 0;
       goto ENT
