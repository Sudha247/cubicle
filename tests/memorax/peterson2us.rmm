forbidden
CS CS

data
  flag0 = * : [0:1]
  flag1 = * : [0:1]
  turn  = * : [0:1]

process
registers
  $flag1 = * : [0:1]
  $turn = * : [0:1]
text
  L0: write: flag0 := 1;
      write: turn := 1;
  L1: read: $flag1 := flag1;
      read: $turn := turn; 
      if $flag1 = 1 && $turn != 0
        then goto L1;
  CS: 
      write: flag0 := 0;
      goto L0

process
registers
  $flag0 = * : [0:1]
  $turn = * : [0:1]
text
  L0: write: flag1 := 1;
      write: turn := 0;
  L1: read: $flag0 := flag0;
      read: $turn := turn;
      if $flag0 = 1 && $turn != 1
        then goto L1;
  CS:
      write: flag1 := 0;
      goto L0
