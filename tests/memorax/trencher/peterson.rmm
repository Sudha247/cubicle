forbidden
CS CS

data
  flag0 = * : [0:1]
  flag1 = * : [0:1]
  turn  = * : [0:1]

process
registers
  $flag = * : [0:1]
  $turn = * : [0:1]
text
  L0: write: flag0 := 1;
      write: turn := 1;
      read: $flag := flag1;
      read: $turn := turn; 
      while $flag = 1 && $turn = 1 do {
        read: $flag := flag1;
        read: $turn := turn
      };
      goto CS;
  CS: 
      write: flag0 := 0;
      goto L0

process
registers
  $flag = * : [0:1]
  $turn = * : [0:1]
text
  L0: write: flag1 := 1;
      write: turn := 0;
      read: $flag := flag0;
      read: $turn := turn;
      while $flag = 1 && $turn = 1 do {
        read: $flag := flag0;
        read: $turn := turn
      };
      goto CS;
  CS:
      write: flag1 := 0;
      goto L0

