
number_procs 2

type loc = L0 | L1 | L2

weak var F : bool
array PC[proc] : loc

init (p) { PC[p] = L0 && F = False }

unsafe (p1 p2) { PC[p1] = L1 && PC[p2] = L1 }


transition t1_1 ([p])
requires { p = #1 && PC[p] = L0 && F = False }
{ PC[p] := L1; }

transition t1_2 ([p])
requires { p = #1 && PC[p] = L1 }
{ F := True; PC[p] := L2; }

transition t1_3 ([p])
requires { p = #1 && PC[p] = L2 && F = False }
{ PC[p] := L0; }

transition t2_1 ([p])
requires { p = #2 && PC[p] = L0 && F = True }
{ PC[p] := L1; }

transition t2_2 ([p])
requires { p = #2 && PC[p] = L1 }
{ F := False; PC[p] := L0; }
