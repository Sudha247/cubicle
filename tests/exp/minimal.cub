
number_procs 2

type enum = E0 | E1 | E2 | E3 | E4 | E5
type loc = L0 | L1 | L2

weak var F : enum
array PC[proc] : loc

init (i) { PC[i] = L0 && F = E0 }

unsafe (i j) { PC[i] = L0 && PC[j] = L1 }

(* TODO : model this with explicit buffers *)

transition t1_1 ([p])
requires { p = #1 && PC[p] = L0 && F = E0 }
{ F := E1; PC[p] := L1; }

transition t1_2 ([p])
requires { p = #1 && PC[p] = L1 && F = E2 }
{ F := E3; PC[p] := L2; }

transition t1_3 ([p])
requires { p = #1 && PC[p] = L2 && F = E4 }
{ F := E0; PC[p] := L0; }


transition t2_1 ([p])
requires { p = #2 && PC[p] = L0 && F = E1 }
{ F := E2; PC[p] := L1; }

transition t2_2 ([p])
requires { p = #2 && PC[p] = L1 && F = E3 }
{ F := E4; PC[p] := L0; }

(*transition t2_3 ([p])
requires { p = #2 && PC[p] = L2 && F = E5 }
{ F := E0; PC[p] := L0; }*)
