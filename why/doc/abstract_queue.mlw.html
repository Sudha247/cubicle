<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<link rel="stylesheet" href="style.css" type="text/css">
<title>abstract_queue.mlw</title>
</head>
<body>
<p>Cubicle BRAB in Why3 <a href="index.html">index</a></p>
<hr>
<div class="why3doc">
<pre>
<span class="keyword1">module</span> <a name="AbstractQueue_1">AbstractQueue</a>

  <span class="keyword1">use</span> <span class="keyword1">import</span> fol.FOL
  <span class="keyword1">use</span> <span class="keyword1">import</span> set.Fset <span class="keyword1">as</span> S
  <span class="keyword1">use</span> <span class="keyword1">import</span> reachability.Reachability

  <span class="keyword1">type</span> <a name="f_7">f</a> = t
  
  <span class="keyword1">type</span> <a name="mk.20t_9">t</a> <span class="keyword1">model</span> { <span class="keyword1">ghost</span> <span class="keyword1">mutable</span> <a name="formula_9">formula</a>: <a href="#f_7">f</a>; <span class="keyword1">mutable</span> <a name="elts_9">elts</a>: S.set <a href="#f_7">f</a> }

  <span class="keyword1">val</span> create () : <a href="#t_9">t</a> <span class="keyword2">ensures</span> { result.<a href="#formula_9">formula</a> = ffalse /\ result.<a href="#elts_9">elts</a> = S.empty }

  <span class="keyword1">val</span> push (f: <a href="#f_7">f</a>) (q: <a href="#t_9">t</a>) : unit <span class="keyword2">writes</span> {q}
    <span class="keyword2">ensures</span> { q.<a href="#formula_9">formula</a> = f ++ (old q.<a href="#formula_9">formula</a>) /\
              q.<a href="#elts_9">elts</a> = S.add f (old q.<a href="#elts_9">elts</a>) }
  
  <span class="keyword1">exception</span> Empty

  <span class="keyword1">val</span> is_empty (q: <a href="#t_9">t</a>) : bool <span class="keyword2">reads</span> {q}
    <span class="keyword2">ensures</span> { result = True &lt;-&gt; (S.is_empty q.<a href="#elts_9">elts</a> /\ q.<a href="#formula_9">formula</a> = ffalse)}
    
  <span class="keyword1">val</span> pop (q: <a href="#t_9">t</a>) : <a href="#f_7">f</a> <span class="keyword2">writes</span> {q}
    <span class="keyword2">ensures</span> { <span class="keyword1">not</span> (S.is_empty (old q.<a href="#elts_9">elts</a>)) /\ result = S.choose (old q.<a href="#elts_9">elts</a>) /\
              q.<a href="#elts_9">elts</a> = S.remove result (old q.<a href="#elts_9">elts</a>) /\
              valid (result =&gt; (old q.<a href="#formula_9">formula</a>)) /\
              q.<a href="#formula_9">formula</a> = (~ result) &amp; (old q.<a href="#formula_9">formula</a>) }
    <span class="keyword2">raises</span>  { <a href="#Empty_17">Empty</a> -&gt; S.is_empty q.<a href="#elts_9">elts</a> /\ q.<a href="#formula_9">formula</a> = ffalse /\
                       S.is_empty (old q.<a href="#elts_9">elts</a>) /\ old q.<a href="#formula_9">formula</a> = ffalse }


  <span class="keyword1">val</span> clear (q: <a href="#t_9">t</a>) : unit <span class="keyword2">writes</span> {q}
  <span class="keyword2">ensures</span> { q.<a href="#formula_9">formula</a> = ffalse /\ q.<a href="#elts_9">elts</a> = S.empty }

  <span class="keyword1">val</span> copy (q: <a href="#t_9">t</a>) : <a href="#t_9">t</a> <span class="keyword2">ensures</span> { result.<a href="#formula_9">formula</a> = q.<a href="#formula_9">formula</a> /\ result.<a href="#elts_9">elts</a> = q.<a href="#elts_9">elts</a> }

<span class="keyword1">end</span>
</pre>
</div>
<hr>
<p>Generated by why3doc 0.82+git</p>
</body>
</html>
